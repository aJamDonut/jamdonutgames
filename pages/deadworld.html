<style type="text/css">
  .split-row {
    border: 1px solid #2f2f2f;
    padding: 10px;
    background-color: rgb(61 61 61);
    margin-bottom: 10px;
}
</style>

<div class="row split-row" id="explains-game">
  <div class="col-12">
    <h1>Deadworld</h1>

    <p>Tiny survival in the browser</p>
    <p>Can you survive a harsh desert? Have you really got what it takes to become a powerful hunter?</p>
    <p>Take on the harsh world in deadworld, pit yourself againt wild animals, killer robots and the local vagrants.</p>
    <h4>Features</h4>
    <br />
    <ul>
      <li>Open world to survive and explore</li>
      <li>Craft survival recipes</li>
      <li>Collect resources from plants and hunting animals</li>
      <li>Buy and sell at shops to fund your hunts</li>
    </ul>
  </div>
</div>

<div class="row split-row">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/core.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/md5.js"></script>

  <script type="text/javascript">
    
    let checking = null;
    function checkPassword() {
      console.log("Play the game");
      const gameDestination = "redirector.html";
      $("#game-iframe").attr("src", gameDestination + "?ts=" + Date.now()); //Cache busts with ts
      $(".game-iframe").removeClass("hidden");
      $(".game-iframe").css("display", "block");

      $("#page-wrapper").removeClass("h-100");
      $("#game-iframe").css("height", window.innerHeight - 64 - 10);
      setInterval(() => {
        $("#game-iframe").css("height", window.innerHeight - 64 - 10);
      }, 1000);
      $("#frame-intro").hide();
      $("#explains-game").hide();
    }
  </script>

  <div class="col-12">
    <div class="">
      <div class="game-iframe hidden" style="display: none">
        <iframe
          style="width: 100%"
          allowfullscreen
          frameborder="0"
          class="game-iframe hidden"
          id="game-iframe"
          src="about:blank"
        ></iframe>
      </div>

      <div class="row justify-content-center" id="frame-intro">
        <div class="">
          <img src="img/deadworld_logo.png" height="250" />
        </div>
        <div class="col-12">
          <div class="white-trans-bg">
            <a
              href="javascript:checkPassword()"
              class="btn btn-large btn-block btn-primary"
              >Play</a
            >
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container mt-4 justify-content-center">
  <div class="row justify-content-center">
    <h4>Screenshots</h4>
  </div>
</div>

<div class="gallery container mt-4">
  <div class="row">
    <div class="col-3">
      <a href="#" data-toggle="modal" data-target="#imageModal">
        <img
          src="screenshots/dw/1.png"
          class="img-fluid"
          alt="Gallery Image 1"
        />
      </a>
    </div>
    <div class="col-3">
      <a href="#" data-toggle="modal" data-target="#imageModal">
        <img
          src="screenshots/dw/3.png"
          class="img-fluid"
          alt="Gallery Image 5"
        />
      </a>
    </div>
    <div class="col-3">
      <a href="#" data-toggle="modal" data-target="#imageModal">
        <img
          src="screenshots/dw/2.png"
          class="img-fluid"
          alt="Gallery Image 5"
        />
      </a>
    </div>
    <div class="col-3">
      <a href="#" data-toggle="modal" data-target="#imageModal">
        <img
          src="screenshots/dw/4.png"
          class="img-fluid"
          alt="Gallery Image 5"
        />
      </a>
    </div>
  </div>
</div>

<!-- Modal -->
<div
  class="modal fade pt-5"
  id="imageModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="imageModalLabel"
  aria-hidden="true"
  style="z-index: 1051"
>
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="imageModalLabel">Screenshot</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <img
          src="https://via.placeholder.com/800x600"
          class="img-fluid"
          alt="Large Image"
        />
      </div>
    </div>
  </div>
</div>

<div class="container mt-4 justify-content-center">
  <div class="row justify-content-center">
    <h4>Gameplay</h4>
  </div>
</div>

<div class="container mt-4 justify-content-center">
  <div class="row justify-content-center">
    <iframe
      width="960"
      height="600"
      src="https://www.youtube.com/embed/3jtG3Su6lcI?si=AOMOZ_RQfmChPNQF"
      title="YouTube video player"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen
    ></iframe>
  </div>
</div>

<div class="container mt-4 justify-content-center">
  <div class="row justify-content-center">
    <h4>Made With</h4>
  </div>
  <div class="row justify-content-center">
    <p>ABE, PixiJS v7, Pixi-Viewport, HowlerJS, EasyStarJS, VSCode, Affinity Designer & Photo</p>
  </div>
</div>

<div class="container mt-4 justify-content-center">
  <div class="row justify-content-center">
    <h4>Made By</h4>
  </div>
  <div class="row justify-content-center">
    <p>Adam Dougherty</p>
  </div>
</div>

<style>
  .container .row .col-3 img {
    width: 150px;
    height: 150px;
    object-fit: cover;
  }
  .modal-dialog {
    display: flex;
    align-items: center;
    min-height: calc(90vh - 1rem);
  }
  .modal-backdrop {
    z-index: 1040;
    display: none;
  }
  .modal {
    z-index: 1050;
  }
  .modal img {
    -webkit-filter: unset;
  }
  .container .row .col-3 img {
    width: 150px;
    height: 150px;
    object-fit: cover;
  }
</style>
<!--
<div class="row split-row" id="explains-help">
  <div class="col-12">
    <h1>Player Guide</h1>

    <h4>Starting out</h4>
    <p>Wip...</p>
  </div>
</div>
-->

<script type="text/javascript">
  (() => {
    document.querySelectorAll("iframe").forEach(function (iframe) {
      iframe.parentElement.style.overflow = "hidden";
      iframe.style.pointerEvents = "none";

      iframe.parentElement.addEventListener("mouseenter", function () {
        iframe.style.pointerEvents = "auto";
        document.body.style.overflow = "hidden"; // Disable scrolling on hover
      });

      iframe.parentElement.addEventListener("mouseleave", function () {
        iframe.style.pointerEvents = "none";
        document.body.style.overflow = ""; // Enable scrolling when not hovering
      });
    });
  })();
</script>

<script type="text/javascript">
  // JavaScript to update modal image when a gallery image is clicked
  document.querySelectorAll('[data-toggle="modal"]').forEach(function (anchor) {
    anchor.addEventListener("click", function () {
      // Get the src of the clicked image
      var imgSrc = this.querySelector("img").getAttribute("src");

      // Update the src of the modal image
      var modalImage = document.querySelector("#imageModal img");
      modalImage.setAttribute("src", imgSrc);
    });
  });
</script>

<style type="text/css">
  .gallery img{
     
      min-width: 110px;
    
  }
  .gallery .col-3 {
    justify-content: center !important;
  }
</style>